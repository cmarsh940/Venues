<button mat-raised-button (click)="goBack()">Cancel</button>
<h1 class="text-center">Editing {{venue.name}}</h1>
<div class="container">
  <form (submit)="updateVenue()" #formData="ngForm" class="form">
    <mat-form-field>
      <input 
        matInput 
        name='name' 
        [(ngModel)]="venue.name" 
        #name='ngModel' 
        placeholder="name" 
        required
      />
    </mat-form-field>

    <mat-form-field>
      <input 
        matInput 
        name='email' 
        [(ngModel)]="venue.email" 
        #email='ngModel' 
        placeholder="Email" 
        required
      />
    </mat-form-field>

    <mat-form-field>
      <input 
        matInput 
        name='phone' 
        [(ngModel)]="venue.phone" 
        #phone='ngModel' 
        placeholder="Phone #" 
        required
      />
    </mat-form-field>

    <mat-form-field>
      <input 
        matInput 
        name='address' 
        [(ngModel)]="venue.address" 
        #address='ngModel' 
        placeholder="Address" 
        required
      />
    </mat-form-field>

    <div class="input-container">
      <mat-form-field>
        <input 
          matInput 
          name="lat" 
          required 
          maxlength=50 
          [(ngModel)]="venue.lat" 
          #lat='ngModel' 
          placeholder="Latitude" 
        />
        <mat-hint>EX: 36.153883</mat-hint>
      </mat-form-field>
    
      <mat-form-field>
        <input 
          matInput 
          name="lng" 
          required 
          maxlength=50 
          [(ngModel)]="venue.lng" 
          #lng='ngModel' 
          placeholder="Longitude" 
        />
        <mat-hint>EX: -95.990629</mat-hint>
      </mat-form-field>
    </div>

    <mat-form-field>
      <input 
        matInput 
        name='website' 
        [(ngModel)]="venue.website" 
        #website='ngModel' 
        placeholder="Website" 
        required
      />
    </mat-form-field>

    <div class="input-container">
      <mat-form-field>
        <span matPrefix>$&nbsp;</span>
        <input 
          matInput type="number" 
          name="minAmmount" 
          required 
          maxlength=250 
          [(ngModel)]="venue.minAmmount" 
          #minAmmount='ngModel'
          placeholder="Min-ammount"
          class="right-align"
        />
        <span matSuffix>.00</span>
      </mat-form-field>
    
      <mat-form-field>
        <span matPrefix>$&nbsp;</span>
        <input 
          matInput 
          type="number" 
          name="maxAmmount" 
          required 
          maxlength=250 
          [(ngModel)]="venue.maxAmmount"
          #maxAmmount='ngModel'
          placeholder="Max-ammount"
          class="right-align"
        />
        <span matSuffix>.00</span>
      </mat-form-field>
    </div>

    <mat-form-field>
      <input 
        matInput 
        name='tour_url' 
        [(ngModel)]="venue.tour_url" 
        #tour_url='ngModel' 
        placeholder="Tour url" 
        required 
      />
    </mat-form-field>
    <mat-form-field>
      <input 
        matInput 
        name='video_url' 
        [(ngModel)]="venue.video_url" 
        #tour_url='ngModel' 
        placeholder="Video url" 
        required 
      />
    </mat-form-field>

    <mat-form-field>
      <mat-select 
        name="amenities" 
        [(ngModel)]="venue.amenities" 
        #amenities='ngModel' 
        placeholder="Venue Amenities" 
        multiple>
        <mat-option *ngFor="let amenity of amenityList" [value]="venue.amenities">
          {{amenity.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    
    <mat-form-field>
      <mat-select  
        name="category" 
        [(ngModel)]="venue.category"
        #category='ngModel' 
        placeholder="Venue Category">
        <mat-option *ngFor="let category of categories" [value]="venue.category">
          {{category.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button type='submit' [disabled]=!formData.valid>Submit</button>
  </form>


<!-- UPLOADING AND IMAGES -->



  <div>
    <mat-toolbar color="primary">
      <span>
        <mat-icon>photo_library</mat-icon>
      </span>
    </mat-toolbar>
    <mat-tab-group dynamicHeight=true (selectedTabChange)="onLinkClick($event)">
      <mat-tab label="Gallery">
        <div *ngIf="!dataLoading">

          <mat-card class="image-card">
          
          </mat-card>
        </div>
        <mat-progress-bar mode="indeterminate" color="primary" bufferValue="0" *ngIf="dataLoading"></mat-progress-bar>
      </mat-tab>


<!-- UPLOAD -->


      <mat-tab label="Uploader">
        <div style="margin: 30px 30px">
          <div class="row">
            <div class="col-md-3">
              <br />
              <div ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}" (fileOver)="fileOverBase($event)" [uploader]="uploader"
                class="well my-drop-zone">
                Drop files here !
              </div>
              <br />
              <h4>Select Files</h4>
              <input type="file" mat-raised-button name="photos" ng2FileSelect [uploader]="uploader" multiple />
              <br/>
            </div>
        
            <div class="col-md-8" style="margin-bottom: 40px">
        
              <h3>Upload queue</h3>
              <p>Queue length: {{ uploader?.queue?.length }}</p>
        
              <table class="table">
                <thead>
                  <tr>
                    <th width="50%">Name</th>
                    <th>Size</th>
                    <th>Progress</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of uploader.queue">
                    <td>
                      <strong>{{ item?.file?.name }}</strong>
                    </td>
                    <td *ngIf="uploader.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                    <td *ngIf="uploader.isHTML5">
                      <div class="progress" style="margin-bottom: 0;">
                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                      </div>
                    </td>
                    <td class="text-center">
                      <span *ngIf="item.isSuccess">
                        <i class="glyphicon glyphicon-ok"></i>
                      </span>
                      <span *ngIf="item.isCancel">
                        <i class="glyphicon glyphicon-ban-circle"></i>
                      </span>
                      <span *ngIf="item.isError">
                        <i class="glyphicon glyphicon-remove red"></i>
                      </span>
                    </td>
                    <td nowrap>
                      <button type="button" mat-raised-button color="primary" (click)="item.upload()" [disabled]="item.isReady || item.isUploading || item.isSuccess">
                        Upload
                      </button>
                      <button type="button" mat-raised-button small (click)="item.cancel()" [disabled]="!item.isUploading">
                        Cancel
                      </button>
                      <button type="button" mat-raised-button color="warn" (click)="item.remove()">
                        Remove
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
        
              <div>
                <div>
                  Queue progress:
                  <div class="progress">
                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                  </div>
                </div>
                <button type="button" mat-raised-button color="primary" (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">
                  Upload all
                </button>
                <button type="button" mat-raised-button (click)="uploader.cancelAll()" [disabled]="!uploader.isUploading">
                  Cancel all
                </button>
                <button type="button" mat-raised-button color="warn" (click)="uploader.clearQueue()" [disabled]="!uploader.queue.length">
                  Remove all
                </button>
              </div>
        
            </div>
        
          </div>
        
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>


