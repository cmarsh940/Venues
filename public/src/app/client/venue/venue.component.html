<div class="containerX">
    <div class="carousel">
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <ng-container *ngIf="venue.pic_url; else elseTemplate">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src='https://s3-us-west-2.amazonaws.com/tulsa-venues/Venues/{{venue.name}}/{{venue.pic_url}}' class="venue-image" alt="Venue slide pictures">
                    </div>
                </ng-container>
                <ng-template #elseTemplate>
                    <div class="carousel-item active">
                        <img class="d-block w-100" src='/assets/images/missing.png' class="venue-image" alt="Missing Venue Picture">
                    </div>
                </ng-template>
            </div>
            <a class="carousel-control-prev text-light bg-dark" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only" matTooltip="Previus">Previous</span>
            </a>
            <a class="carousel-control-next text-light bg-dark" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only" matTooltip="Next">Next</span>
            </a>
        </div>
    </div><!--
    --><div class="container-fluid">
        <div class="row" id="top">
            <div class="col-3" id="venue-info">
                <h2 class="text-center">{{venue.name}}</h2>
                <div class="mx-auto" id="rating">
                    <i class="material-icons">&#xE83A;</i>
                    <i class="material-icons">&#xE83A;</i>
                    <i class="material-icons">&#xE83A;</i>
                    <i class="material-icons">&#xE83A;</i>
                    <i class="material-icons">&#xE83A;</i>
                </div>
                <ul class="text-center">
                    <li>
                        <h5>{{venue.phone}}</h5>
                    </li>
                    <li>
                        <h5>{{venue.address}}</h5>
                    </li>
                    <li>
                        <a href='{{venue.website}}' target='_blank' rel='nofollow noopener noreferrer' matTooltip="View {{venue.name}}'s' website">view website</a>
                    </li>
                </ul>
            </div><!--
            --><div class="col-9" id="venue-about">
                <div class="text-center">
                    {{venue.description}}
                </div>    
            </div>    
        </div>
        <div class="row" id="middle-top">
            <div class="col-3" id="vender-info">
                <div>
                    <h2 class="text-center">{{ vender?.name }}</h2>
                    <ng-container *ngIf="vender.pic_url; else elseTemplate">
                        <div class="vender-link">
                            <a [routerLink]="['/vender', 'display', vender._id]">
                                <img src='https://s3-us-west-2.amazonaws.com/tulsa-venues/Venders/{{vender.name}}/{{vender.pic_url}}' class="rounded-circle mx-auto d-block" id="vender-image" alt="Vender Picture" />
                            </a>
                        </div>
                    </ng-container>
                    <ng-template #elseTemplate>
                        <div class="vender-link">
                            <a [routerLink]="['/vender', 'display', v._id]">
                                <img src='/assets/images/missing.png' class="rounded-circle mx-auto d-block" id="vender-image" alt="Venue Picture">
                                <div class="middle rounded-circle">
                                    <div class="text">{{vender?.name}}</div>
                                </div>
                            </a>
                        </div>
                    </ng-template>
                </div>
            </div><!--
            --><div class="col-9" id="venue-about">
                <mat-tab-group class="demo-tab-group" color="accent">
                    <mat-tab>
                        <ng-template mat-tab-label>
                            <i class="material-icons tab-icon">&#xE88F;</i>
                            DETAILS & INFORMATION
                        </ng-template>
                        <div class="tab-content">
                            <ul id="venue-contact">
                                <li class="list-items">
                                    <h6>Price range: {{ venue.minAmmount | currency }} - {{ venue.maxAmmount | currency }}</h6>
                                </li>
                                <li class="list-items">
                                    <a href='{{ venue.video_url }}' target='_blank'>
                                        <mat-icon aria-label="Video icon link">
                                            <i class="material-icons">&#xE04B;</i>
                                        </mat-icon>
                                        <p>View {{ venue.name }} video</p>
                                    </a>
                                </li>
                                <li class="list-items">
                                    <a href='mailto:{{ venue.email }}' target='_top'>
                                        <mat-icon aria-label="email icon link">
                                            <i class="material-icons">&#xE0BE;</i>
                                        </mat-icon>
                                        <p>Email {{ venue.name }}</p>
                                    </a>
                                </li>
                                <li class="list-items">
                                    <a href='tel:{{ venue.phone }}' data-type='phone'>
                                        <mat-icon aria-label="Phone icon link">
                                            <i class="material-icons">&#xE0CD;</i>
                                        </mat-icon>
                                        <p>Call {{ venue.name }}</p>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </mat-tab>
                    <mat-tab>
                        <ng-template mat-tab-label templateRef> 
                            <i class="material-icons tab-icon">&#xE876;</i>
                            AMENITIES
                        </ng-template>
                        <mat-selection-list #amenities>
                            <mat-list-option *ngFor="let amenity of venue.amenities">
                                {{amenity}}
                            </mat-list-option>
                        </mat-selection-list>

                    </mat-tab>
                    <mat-tab>
                        <ng-template mat-tab-label>
                            <i class="material-icons tab-icon">&#xE7FA;</i>
                            GALLERY
                        </ng-template>
                        <div class="tab-content">
                            <mat-grid-list cols="1" rowHeight="2:1" >
                                <mat-grid-tile>COMING SOON</mat-grid-tile>
                            </mat-grid-list>
                        </div>
                    </mat-tab>
                    <mat-tab>
                        <ng-template mat-tab-label>
                            <button mat-button cdk-overlay-origin #trigger="cdkOverlayOrigin" (click)="isMenuOpen = !isMenuOpen" matTooltip="View 3D tour">
                                3D TOUR
                            </button>
                            <ng-template cdk-connected-overlay [origin]="trigger" [width]="900" hasBackdrop [open]="isMenuOpen" (backdropClick)="isMenuOpen=false">
                                <div class="overlay">
                                    <div class="embed-responsive embed-responsive-16by9" id="content">
                                        <iframe class="embed-responsive-item" [src]='sanitizer.bypassSecurityTrustResourceUrl(venue.tour_url)' scrolling="no"></iframe>
                                    </div>
                                </div>
                            </ng-template>
                        </ng-template>
                    </mat-tab>
                </mat-tab-group>
                
            </div>    
        </div>
        <div class="row" id="middle-bottom">
            <div class="col-3">
                <mat-list *ngFor="let amenity of venue.amenities">
                    <mat-list-item>
                        <i class="material-icons">&#xE876;</i> {{amenity.name}}
                    </mat-list-item>
                </mat-list>
                {{ venue | json }}
            </div>
            <div class="col-9">
                <mat-toolbar color="accent">REVIEWS</mat-toolbar>
                <ng-container *ngIf="venue.review && venue.review.approved === true; else elseTemplate">
                    <mat-card>
                        <h6>{{venue.review}}</h6>
                    </mat-card>
                </ng-container>
                <ng-template #elseTemplate>
                    <mat-card>
                        <h6>There are no reviews for {{ venue.name }}</h6>
                    </mat-card>
                </ng-template>
            </div>
        </div>

        <div class="row" id="bottom">
            <div class="col-3"></div>
            <div class="col-9" id="map">
                <agm-map [latitude]='venue.lat' [longitude]='venue.lng' [zoom]="zoom" [disableDefaultUI]="false" [zoomControl]="false">
                    <agm-marker [title]="venue.address" [latitude]="venue.lat" [longitude]="venue.lng">
                    </agm-marker>
                </agm-map>
            </div>
        </div>
    </div>
</div>